import{_ as e}from"./nuxt-link-DlD_4d-2.mjs";import t from"./index-AgLHWp8z.mjs";import{defineComponent as a,ref as i,computed as l,watch as s,h as r,mergeProps as n,withCtx as o,createVNode as u,createTextVNode as m,unref as d,useSSRContext as p}from"vue";import{ssrRenderAttrs as v,ssrRenderComponent as c,ssrInterpolate as f}from"vue/server-renderer";import{c as g,b as h}from"./api-qvnChiK5.mjs";import{C as x,N as y,F as b}from"./server.mjs";import{N as w}from"./Input-DBNoyZOz.mjs";import{N as k}from"./Select-C0U9uRTf.mjs";import{N as j}from"./Switch-DTUH-ntq.mjs";import{N as _}from"./DataTable-BeR9LhSC.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:path";import"@iconify/vue";import"@iconify/utils/lib/css/icon";import"pinia";import"vue-router";import"@css-render/vue3-ssr";import"seemly";import"@css-render/plugin-bem";import"css-render";import"lodash-es";import"evtd";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"date-fns/locale";import"treemate";import"./Tag-BJGgCXYj.mjs";import"@juggle/resize-observer";import"./Checkbox-uGza85BZ.mjs";import"./Ellipsis-DDM1ZdJ1.mjs";import"./get-slot-BIpdyb5h.mjs";const U=a({__name:"index",__ssrInlineRender:!0,setup(a){const p=i(""),U=i(null),z=i(!1),C=i(10),D=i(0),A=i([]),N=i(0),B=i(!1),I=i([]);async function fetchList(){B.value=!0;try{const e=await g("/website-settings",{params:{q:p.value||void 0,kindID:U.value||void 0,isActive:!!z.value||void 0,limit:C.value,offset:D.value}});A.value=Array.isArray(e?.items)?e.items:[],N.value="number"==typeof e?.total?e.total:A.value.length}finally{B.value=!1}}const L=l(()=>I.value.map(e=>({label:e.name||e.id,value:e.id})));function prev(){D.value=Math.max(0,D.value-C.value)}function next(){D.value+C.value<N.value&&(D.value+=C.value)}s([p,U,z,C,D],fetchList,{immediate:!0}),async function(){try{I.value=await g("/website-setting-kinds")}catch{I.value=[]}}();const $=l(()=>[{title:"نام",key:"name"},{title:"عنوان",key:"title"},{title:"نوع",key:"kindID"},{title:"لینک",key:"href"},{title:"فعال",key:"isActive",render:e=>e.isActive?"بله":"خیر"},{title:"عملیات",key:"actions",render:e=>r("div",{class:"flex items-center gap-2"},[r(x,{size:"small",onClick:()=>function(e){b(`/admin/website-settings/${e.id}`)}(e)},{default:()=>"ویرایش"}),r(x,{size:"small",type:"error",secondary:!0,onClick:()=>async function(e){confirm("حذف تنظیم؟")&&(await h(`/website-settings/${e.id}`),fetchList())}(e)},{default:()=>"حذف"})])}]);return(a,i,l,s)=>{const r=e,g=t;i(`<section${v(n({class:"container mx-auto px-4 py-8",dir:"rtl"},s))}><div class="mb-5 flex items-center justify-between gap-3"><h1 class="text-xl font-bold">تنظیمات سایت</h1>`),i(c(r,{to:"/admin/website-settings/create",class:"inline-flex items-center gap-2 rounded-xl bg-sky-600 text-white px-3 py-2 text-sm"},{default:o((e,t,a,i)=>{if(!t)return[u(g,{name:"ph:plus"}),m(" افزودن تنظیم ")];t(c(g,{name:"ph:plus"},null,a,i)),t(" افزودن تنظیم ")}),_:1},l)),i("</div>"),i(c(d(y),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm mb-4",bordered:!1},{default:o((e,t,a,i)=>{if(!t)return[u("div",{class:"flex flex-wrap items-center gap-3"},[u(d(w),{value:p.value,"onUpdate:value":e=>p.value=e,placeholder:"جستجو...",class:"w-64",clearable:"",size:"large"},{prefix:o(()=>[u(g,{name:"ph:magnifying-glass-duotone"})]),_:1},8,["value","onUpdate:value"]),u(d(k),{value:U.value,"onUpdate:value":e=>U.value=e,options:L.value,placeholder:"نوع",class:"w-52",clearable:""},null,8,["value","onUpdate:value","options"]),u(d(j),{value:z.value,"onUpdate:value":e=>z.value=e},{checked:o(()=>[m("فقط فعال")]),unchecked:o(()=>[m("همه")]),_:1},8,["value","onUpdate:value"])])];t(`<div class="flex flex-wrap items-center gap-3"${i}>`),t(c(d(w),{value:p.value,"onUpdate:value":e=>p.value=e,placeholder:"جستجو...",class:"w-64",clearable:"",size:"large"},{prefix:o((e,t,a,i)=>{if(!t)return[u(g,{name:"ph:magnifying-glass-duotone"})];t(c(g,{name:"ph:magnifying-glass-duotone"},null,a,i))}),_:1},a,i)),t(c(d(k),{value:U.value,"onUpdate:value":e=>U.value=e,options:L.value,placeholder:"نوع",class:"w-52",clearable:""},null,a,i)),t(c(d(j),{value:z.value,"onUpdate:value":e=>z.value=e},{checked:o((e,t,a,i)=>{if(!t)return[m("فقط فعال")];t("فقط فعال")}),unchecked:o((e,t,a,i)=>{if(!t)return[m("همه")];t("همه")}),_:1},a,i)),t("</div>")}),_:1},l)),i(c(d(_),{columns:$.value,data:A.value,loading:B.value,bordered:!1,class:"rounded-2xl ring-1 ring-slate-200 overflow-hidden"},null,l)),i(`<div class="mt-4 flex items-center justify-between"><div class="text-sm text-slate-600">مجموع: ${f(N.value)}</div><div class="flex items-center gap-2">`),i(c(d(x),{size:"small",disabled:0===D.value,onClick:prev},{default:o((e,t,a,i)=>{if(!t)return[m("قبلی")];t("قبلی")}),_:1},l)),i(c(d(x),{size:"small",disabled:D.value+C.value>=N.value,onClick:next},{default:o((e,t,a,i)=>{if(!t)return[m("بعدی")];t("بعدی")}),_:1},l)),i("</div></div></section>")}}}),z=U.setup;U.setup=(e,t)=>{const a=p();return(a.modules||(a.modules=new Set)).add("pages/admin/website-settings/index.vue"),z?z(e,t):void 0};export{U as default};
//# sourceMappingURL=index-DMYY0iF5.mjs.map
