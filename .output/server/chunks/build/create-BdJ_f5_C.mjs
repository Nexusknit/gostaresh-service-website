import{_ as e}from"./nuxt-link-DlD_4d-2.mjs";import{defineComponent as a,ref as l,mergeProps as u,withCtx as t,createTextVNode as n,unref as o,createVNode as r,useSSRContext as i}from"vue";import{ssrRenderAttrs as d,ssrRenderComponent as s}from"vue/server-renderer";import{A as v}from"./AdminImageUploader-_F4OgyLb.mjs";import{u as m,d as p}from"./api-qvnChiK5.mjs";import{N as c,C as f,F as g}from"./server.mjs";import{u as b}from"./use-message-DH0YWJK4.mjs";import{N as U,a as _}from"./FormItem-Ds_MAETL.mjs";import{N as h}from"./Input-DBNoyZOz.mjs";import{N as y}from"./Switch-DTUH-ntq.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:path";import"pinia";import"vue-router";import"@iconify/vue";import"@css-render/vue3-ssr";import"seemly";import"@css-render/plugin-bem";import"css-render";import"lodash-es";import"evtd";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"async-validator";import"date-fns/locale";const x=a({__name:"create",__ssrInlineRender:!0,setup(a){const i=b(),x=l(null),A=l({name:"",slug:"",description:"",image:"",isActive:!0}),V=l(!1),S={name:{required:!0,message:"نام الزامی است",trigger:"blur"}};async function ensureSlug(){if(A.value.name&&!A.value.slug)try{const{slug:e}=await m()("utils/slug/preview",{method:"POST",body:{model:"brand",source:A.value.name}});e&&(A.value.slug=e)}catch{}}async function onSubmit(){try{await(x.value?.validate())}catch{return}V.value=!0;try{await p("/brands",{name:A.value.name,description:A.value.description||void 0,image:A.value.image||void 0,slug:A.value.slug||void 0,isActive:A.value.isActive}),i.success("برند افزوده شد"),g("/admin/brands")}catch(e){i.error(e?.data?.message||"خطا در ثبت")}finally{V.value=!1}}return(a,l,i,m)=>{const p=e;l(`<section${d(u({class:"container mx-auto px-4 py-8",dir:"rtl"},m))}><div class="mb-5 flex items-center justify-between gap-3"><h1 class="text-xl font-bold">افزودن برند</h1>`),l(s(p,{to:"/admin/brands",class:"text-sky-600 hover:underline text-sm"},{default:t((e,a,l,u)=>{if(!a)return[n("بازگشت")];a("بازگشت")}),_:1},i)),l("</div>"),l(s(o(c),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm",bordered:!1},{default:t((e,a,l,u)=>{if(!a)return[r(o(U),{model:A.value,rules:S,ref_key:"formRef",ref:x,"label-placement":"left","label-width":"120"},{default:t(()=>[r(o(_),{label:"نام",path:"name"},{default:t(()=>[r(o(h),{value:A.value.name,"onUpdate:value":e=>A.value.name=e,onBlur:ensureSlug},null,8,["value","onUpdate:value"])]),_:1}),r(o(_),{label:"اسلاگ",path:"slug"},{default:t(()=>[r(o(h),{value:A.value.slug,"onUpdate:value":e=>A.value.slug=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(_),{label:"توضیحات",path:"description"},{default:t(()=>[r(o(h),{value:A.value.description,"onUpdate:value":e=>A.value.description=e,type:"textarea"},null,8,["value","onUpdate:value"])]),_:1}),r(o(_),{label:"تصویر",path:"image"},{default:t(()=>[r(v,{modelValue:A.value.image,"onUpdate:modelValue":e=>A.value.image=e,scope:"brands"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(o(_),{label:"فعال"},{default:t(()=>[r(o(y),{value:A.value.isActive,"onUpdate:value":e=>A.value.isActive=e},null,8,["value","onUpdate:value"])]),_:1}),r("div",{class:"pt-2"},[r(o(f),{type:"primary",loading:V.value,onClick:onSubmit},{default:t(()=>[n("ثبت")]),_:1},8,["loading"])])]),_:1},8,["model"])];a(s(o(U),{model:A.value,rules:S,ref_key:"formRef",ref:x,"label-placement":"left","label-width":"120"},{default:t((e,a,l,u)=>{if(!a)return[r(o(_),{label:"نام",path:"name"},{default:t(()=>[r(o(h),{value:A.value.name,"onUpdate:value":e=>A.value.name=e,onBlur:ensureSlug},null,8,["value","onUpdate:value"])]),_:1}),r(o(_),{label:"اسلاگ",path:"slug"},{default:t(()=>[r(o(h),{value:A.value.slug,"onUpdate:value":e=>A.value.slug=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(_),{label:"توضیحات",path:"description"},{default:t(()=>[r(o(h),{value:A.value.description,"onUpdate:value":e=>A.value.description=e,type:"textarea"},null,8,["value","onUpdate:value"])]),_:1}),r(o(_),{label:"تصویر",path:"image"},{default:t(()=>[r(v,{modelValue:A.value.image,"onUpdate:modelValue":e=>A.value.image=e,scope:"brands"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(o(_),{label:"فعال"},{default:t(()=>[r(o(y),{value:A.value.isActive,"onUpdate:value":e=>A.value.isActive=e},null,8,["value","onUpdate:value"])]),_:1}),r("div",{class:"pt-2"},[r(o(f),{type:"primary",loading:V.value,onClick:onSubmit},{default:t(()=>[n("ثبت")]),_:1},8,["loading"])])];a(s(o(_),{label:"نام",path:"name"},{default:t((e,a,l,u)=>{if(!a)return[r(o(h),{value:A.value.name,"onUpdate:value":e=>A.value.name=e,onBlur:ensureSlug},null,8,["value","onUpdate:value"])];a(s(o(h),{value:A.value.name,"onUpdate:value":e=>A.value.name=e,onBlur:ensureSlug},null,l,u))}),_:1},l,u)),a(s(o(_),{label:"اسلاگ",path:"slug"},{default:t((e,a,l,u)=>{if(!a)return[r(o(h),{value:A.value.slug,"onUpdate:value":e=>A.value.slug=e},null,8,["value","onUpdate:value"])];a(s(o(h),{value:A.value.slug,"onUpdate:value":e=>A.value.slug=e},null,l,u))}),_:1},l,u)),a(s(o(_),{label:"توضیحات",path:"description"},{default:t((e,a,l,u)=>{if(!a)return[r(o(h),{value:A.value.description,"onUpdate:value":e=>A.value.description=e,type:"textarea"},null,8,["value","onUpdate:value"])];a(s(o(h),{value:A.value.description,"onUpdate:value":e=>A.value.description=e,type:"textarea"},null,l,u))}),_:1},l,u)),a(s(o(_),{label:"تصویر",path:"image"},{default:t((e,a,l,u)=>{if(!a)return[r(v,{modelValue:A.value.image,"onUpdate:modelValue":e=>A.value.image=e,scope:"brands"},null,8,["modelValue","onUpdate:modelValue"])];a(s(v,{modelValue:A.value.image,"onUpdate:modelValue":e=>A.value.image=e,scope:"brands"},null,l,u))}),_:1},l,u)),a(s(o(_),{label:"فعال"},{default:t((e,a,l,u)=>{if(!a)return[r(o(y),{value:A.value.isActive,"onUpdate:value":e=>A.value.isActive=e},null,8,["value","onUpdate:value"])];a(s(o(y),{value:A.value.isActive,"onUpdate:value":e=>A.value.isActive=e},null,l,u))}),_:1},l,u)),a(`<div class="pt-2"${u}>`),a(s(o(f),{type:"primary",loading:V.value,onClick:onSubmit},{default:t((e,a,l,u)=>{if(!a)return[n("ثبت")];a("ثبت")}),_:1},l,u)),a("</div>")}),_:1},l,u))}),_:1},i)),l("</section>")}}}),A=x.setup;x.setup=(e,a)=>{const l=i();return(l.modules||(l.modules=new Set)).add("pages/admin/brands/create.vue"),A?A(e,a):void 0};export{x as default};
//# sourceMappingURL=create-BdJ_f5_C.mjs.map
