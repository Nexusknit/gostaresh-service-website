import{_ as e}from"./nuxt-link-DlD_4d-2.mjs";import t from"./index-AgLHWp8z.mjs";import{defineComponent as a,ref as l,computed as i,watch as r,h as s,mergeProps as n,withCtx as o,createTextVNode as u,createVNode as m,unref as d,useSSRContext as p}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as v,ssrInterpolate as f}from"vue/server-renderer";import{c as h,b as y}from"./api-qvnChiK5.mjs";import{C as g,N as x,F as b}from"./server.mjs";import{N as j}from"./Input-DBNoyZOz.mjs";import{N as k}from"./Select-C0U9uRTf.mjs";import{N as w}from"./Switch-DTUH-ntq.mjs";import{N as _}from"./DataTable-BeR9LhSC.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:path";import"@iconify/vue";import"@iconify/utils/lib/css/icon";import"pinia";import"vue-router";import"@css-render/vue3-ssr";import"seemly";import"@css-render/plugin-bem";import"css-render";import"lodash-es";import"evtd";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"date-fns/locale";import"treemate";import"./Tag-BJGgCXYj.mjs";import"@juggle/resize-observer";import"./Checkbox-uGza85BZ.mjs";import"./Ellipsis-DDM1ZdJ1.mjs";import"./get-slot-BIpdyb5h.mjs";const U=a({__name:"index",__ssrInlineRender:!0,setup(a){const p=l(""),U=l(null),z=l(!1),C=l(10),D=l(0),A=l([]),N=l(0),T=l(!1),B=l([]);async function fetchList(){T.value=!0;try{const e=await h("/articles",{params:{q:p.value||void 0,articleTypeID:U.value||void 0,isActive:!!z.value||void 0,limit:C.value,offset:D.value}});A.value=Array.isArray(e?.items)?e.items:[],N.value="number"==typeof e?.total?e.total:A.value.length}finally{T.value=!1}}const I=i(()=>B.value.map(e=>({label:e.name||e.id,value:e.id})));function prev(){D.value=Math.max(0,D.value-C.value)}function next(){D.value+C.value<N.value&&(D.value+=C.value)}r([p,U,z,C,D],fetchList,{immediate:!0}),async function(){try{B.value=await h("/articles/types")}catch{B.value=[]}}();const L=i(()=>[{title:"عنوان",key:"title"},{title:"اسلاگ",key:"slug"},{title:"نوع",key:"articleTypeID"},{title:"فعال",key:"isActive",render:e=>e.isActive?"بله":"خیر"},{title:"عملیات",key:"actions",render:e=>s("div",{class:"flex items-center gap-2"},[s(g,{size:"small",onClick:()=>function(e){b(`/admin/articles/${e.id}`)}(e)},{default:()=>"ویرایش"}),s(g,{size:"small",type:"error",secondary:!0,onClick:()=>async function(e){confirm("حذف مقاله؟")&&(await y(`/articles/${e.id}`),fetchList())}(e)},{default:()=>"حذف"})])}]);return(a,l,i,r)=>{const s=e,h=t;l(`<section${c(n({class:"container mx-auto px-4 py-8",dir:"rtl"},r))}><div class="mb-5 flex items-center justify-between gap-3"><h1 class="text-xl font-bold">مقالات</h1><div class="flex items-center gap-2">`),l(v(s,{to:"/admin/articles/types",class:"text-sky-600 hover:underline text-sm"},{default:o((e,t,a,l)=>{if(!t)return[u("مدیریت نوع مقالات")];t("مدیریت نوع مقالات")}),_:1},i)),l(v(s,{to:"/admin/articles/create",class:"inline-flex items-center gap-2 rounded-xl bg-sky-600 text-white px-3 py-2 text-sm"},{default:o((e,t,a,l)=>{if(!t)return[m(h,{name:"ph:plus"}),u(" افزودن مقاله ")];t(v(h,{name:"ph:plus"},null,a,l)),t(" افزودن مقاله ")}),_:1},i)),l("</div></div>"),l(v(d(x),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm mb-4",bordered:!1},{default:o((e,t,a,l)=>{if(!t)return[m("div",{class:"flex flex-wrap items-center gap-3"},[m(d(j),{value:p.value,"onUpdate:value":e=>p.value=e,placeholder:"جستجو...",class:"w-64",clearable:"",size:"large"},{prefix:o(()=>[m(h,{name:"ph:magnifying-glass-duotone"})]),_:1},8,["value","onUpdate:value"]),m(d(k),{value:U.value,"onUpdate:value":e=>U.value=e,options:I.value,placeholder:"نوع",class:"w-52",clearable:""},null,8,["value","onUpdate:value","options"]),m(d(w),{value:z.value,"onUpdate:value":e=>z.value=e},{checked:o(()=>[u("فقط فعال")]),unchecked:o(()=>[u("همه")]),_:1},8,["value","onUpdate:value"])])];t(`<div class="flex flex-wrap items-center gap-3"${l}>`),t(v(d(j),{value:p.value,"onUpdate:value":e=>p.value=e,placeholder:"جستجو...",class:"w-64",clearable:"",size:"large"},{prefix:o((e,t,a,l)=>{if(!t)return[m(h,{name:"ph:magnifying-glass-duotone"})];t(v(h,{name:"ph:magnifying-glass-duotone"},null,a,l))}),_:1},a,l)),t(v(d(k),{value:U.value,"onUpdate:value":e=>U.value=e,options:I.value,placeholder:"نوع",class:"w-52",clearable:""},null,a,l)),t(v(d(w),{value:z.value,"onUpdate:value":e=>z.value=e},{checked:o((e,t,a,l)=>{if(!t)return[u("فقط فعال")];t("فقط فعال")}),unchecked:o((e,t,a,l)=>{if(!t)return[u("همه")];t("همه")}),_:1},a,l)),t("</div>")}),_:1},i)),l(v(d(_),{columns:L.value,data:A.value,loading:T.value,bordered:!1,class:"rounded-2xl ring-1 ring-slate-200 overflow-hidden"},null,i)),l(`<div class="mt-4 flex items-center justify-between"><div class="text-sm text-slate-600">مجموع: ${f(N.value)}</div><div class="flex items-center gap-2">`),l(v(d(g),{size:"small",disabled:0===D.value,onClick:prev},{default:o((e,t,a,l)=>{if(!t)return[u("قبلی")];t("قبلی")}),_:1},i)),l(v(d(g),{size:"small",disabled:D.value+C.value>=N.value,onClick:next},{default:o((e,t,a,l)=>{if(!t)return[u("بعدی")];t("بعدی")}),_:1},i)),l("</div></div></section>")}}}),z=U.setup;U.setup=(e,t)=>{const a=p();return(a.modules||(a.modules=new Set)).add("pages/admin/articles/index.vue"),z?z(e,t):void 0};export{U as default};
//# sourceMappingURL=index-VJPNBTex.mjs.map
