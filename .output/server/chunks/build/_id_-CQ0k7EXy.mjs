import{_ as e}from"./nuxt-link-DlD_4d-2.mjs";import{defineComponent as t,ref as a,mergeProps as r,withCtx as l,createTextVNode as n,unref as i,createVNode as o,useSSRContext as s}from"vue";import{ssrRenderAttrs as u,ssrRenderComponent as m}from"vue/server-renderer";import{useRoute as d}from"vue-router";import{a as p,b as v}from"./api-qvnChiK5.mjs";import{N as f,C as c,F as g}from"./server.mjs";import{u as y}from"./use-message-DH0YWJK4.mjs";import{N as b,a as _}from"./FormItem-Ds_MAETL.mjs";import{N as h}from"./Input-DBNoyZOz.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:path";import"pinia";import"@iconify/vue";import"@css-render/vue3-ssr";import"seemly";import"@css-render/plugin-bem";import"css-render";import"lodash-es";import"evtd";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"async-validator";import"date-fns/locale";const k=t({__name:"[id]",__ssrInlineRender:!0,setup(t){const s=d(),k=String(s.params.id),w=y(),x=a(null),j=a({name:""}),D={name:{required:!0,message:"نام الزامی است",trigger:"blur"}},C=a(!1),U=a(!1);async function onSubmit(){try{await(x.value?.validate())}catch{return}C.value=!0;try{await p(`/website-setting-kinds/${k}`,{name:j.value.name}),w.success("ذخیره شد")}catch(e){w.error(e?.data?.message||"خطا در ذخیره")}finally{C.value=!1}}async function onDelete(){if(confirm("حذف نوع؟")){U.value=!0;try{await v(`/website-setting-kinds/${k}`),w.success("حذف شد"),g("/admin/website-setting-kinds")}catch(e){w.error(e?.data?.message||"خطا در حذف")}finally{U.value=!1}}}return(t,a,s,d)=>{const p=e;a(`<section${u(r({class:"container mx-auto px-4 py-8",dir:"rtl"},d))}><div class="mb-5 flex items-center justify-between gap-3"><h1 class="text-xl font-bold">ویرایش نوع تنظیمات</h1>`),a(m(p,{to:"/admin/website-setting-kinds",class:"text-sky-600 hover:underline text-sm"},{default:l((e,t,a,r)=>{if(!t)return[n("بازگشت")];t("بازگشت")}),_:1},s)),a("</div>"),a(m(i(f),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm",bordered:!1},{default:l((e,t,a,r)=>{if(!t)return[o(i(b),{model:j.value,rules:D,ref_key:"formRef",ref:x,"label-placement":"left","label-width":"140"},{default:l(()=>[o(i(_),{label:"نام",path:"name"},{default:l(()=>[o(i(h),{value:j.value.name,"onUpdate:value":e=>j.value.name=e},null,8,["value","onUpdate:value"])]),_:1}),o("div",{class:"pt-2 flex items-center gap-2"},[o(i(c),{type:"primary",loading:C.value,onClick:onSubmit},{default:l(()=>[n("ذخیره")]),_:1},8,["loading"]),o(i(c),{type:"error",secondary:"",loading:U.value,onClick:onDelete},{default:l(()=>[n("حذف")]),_:1},8,["loading"])])]),_:1},8,["model"])];t(m(i(b),{model:j.value,rules:D,ref_key:"formRef",ref:x,"label-placement":"left","label-width":"140"},{default:l((e,t,a,r)=>{if(!t)return[o(i(_),{label:"نام",path:"name"},{default:l(()=>[o(i(h),{value:j.value.name,"onUpdate:value":e=>j.value.name=e},null,8,["value","onUpdate:value"])]),_:1}),o("div",{class:"pt-2 flex items-center gap-2"},[o(i(c),{type:"primary",loading:C.value,onClick:onSubmit},{default:l(()=>[n("ذخیره")]),_:1},8,["loading"]),o(i(c),{type:"error",secondary:"",loading:U.value,onClick:onDelete},{default:l(()=>[n("حذف")]),_:1},8,["loading"])])];t(m(i(_),{label:"نام",path:"name"},{default:l((e,t,a,r)=>{if(!t)return[o(i(h),{value:j.value.name,"onUpdate:value":e=>j.value.name=e},null,8,["value","onUpdate:value"])];t(m(i(h),{value:j.value.name,"onUpdate:value":e=>j.value.name=e},null,a,r))}),_:1},a,r)),t(`<div class="pt-2 flex items-center gap-2"${r}>`),t(m(i(c),{type:"primary",loading:C.value,onClick:onSubmit},{default:l((e,t,a,r)=>{if(!t)return[n("ذخیره")];t("ذخیره")}),_:1},a,r)),t(m(i(c),{type:"error",secondary:"",loading:U.value,onClick:onDelete},{default:l((e,t,a,r)=>{if(!t)return[n("حذف")];t("حذف")}),_:1},a,r)),t("</div>")}),_:1},a,r))}),_:1},s)),a("</section>")}}}),w=k.setup;k.setup=(e,t)=>{const a=s();return(a.modules||(a.modules=new Set)).add("pages/admin/website-setting-kinds/[id].vue"),w?w(e,t):void 0};export{k as default};
//# sourceMappingURL=_id_-CQ0k7EXy.mjs.map
