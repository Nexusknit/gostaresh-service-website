import{_ as e}from"./nuxt-link-DlD_4d-2.mjs";import t from"./index-AgLHWp8z.mjs";import{defineComponent as r,ref as o,computed as s,h as i,mergeProps as n,withCtx as m,createVNode as l,createTextVNode as a,unref as p,useSSRContext as u}from"vue";import{ssrRenderAttrs as d,ssrRenderComponent as c}from"vue/server-renderer";import{b as f,c as v}from"./api-qvnChiK5.mjs";import{u as h}from"./useAccess-BGBQvVbm.mjs";import{C as y,F as x}from"./server.mjs";import{N as g}from"./DataTable-BeR9LhSC.mjs";import{u as j}from"./use-message-DH0YWJK4.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:path";import"@iconify/vue";import"@iconify/utils/lib/css/icon";import"./useAuth-BCA76F4T.mjs";import"pinia";import"vue-router";import"@css-render/vue3-ssr";import"seemly";import"@css-render/plugin-bem";import"css-render";import"lodash-es";import"evtd";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"./Input-DBNoyZOz.mjs";import"date-fns/locale";import"./Checkbox-uGza85BZ.mjs";import"./Ellipsis-DDM1ZdJ1.mjs";import"./Select-C0U9uRTf.mjs";import"treemate";import"./Tag-BJGgCXYj.mjs";import"@juggle/resize-observer";import"./get-slot-BIpdyb5h.mjs";const b=r({__name:"index",__ssrInlineRender:!0,setup(r){const{hasPerm:u}=h(),b=j(),C=o([]),D=o(!1),k=s(()=>u("role.create")),B=s(()=>u("role.update")),_=s(()=>u("role.delete"));async function onDelete(e){if(_.value&&confirm("حذف نقش؟"))try{await f(`/roles/${e.id}`),b.success("حذف شد"),async function(){D.value=!0;try{C.value=await v("/roles")}finally{D.value=!1}}()}catch(e){b.error(e?.data?.message||"حذف انجام نشد")}}const w=s(()=>{const e=[{title:"نام",key:"name"},{title:"شناسه",key:"id"}];return(B.value||_.value)&&e.push({title:"اقدامات",key:"actions",render(e){const t=[];return B.value&&t.push(i(y,{size:"small",onClick:()=>function(e){B.value&&x(`/admin/roles/${e.id}`)}(e)},{default:()=>"ویرایش"})),_.value&&t.push(i(y,{size:"small",type:"error",secondary:!0,onClick:()=>onDelete(e)},{default:()=>"حذف"})),t.length?i("div",{class:"flex items-center gap-2"},t):null}}),e});return(r,o,s,i)=>{const u=e,f=t;o(`<section${d(n({class:"container mx-auto px-4 py-8",dir:"rtl"},i))}><div class="mb-5 flex items-center justify-between gap-3"><h1 class="text-xl font-bold">نقش‌ها</h1>`),k.value?o(c(u,{to:"/admin/roles/create",class:"inline-flex items-center gap-2 rounded-xl bg-sky-600 text-white px-3 py-2 text-sm"},{default:m((e,t,r,o)=>{if(!t)return[l(f,{name:"ph:plus"}),a(" افزودن نقش ")];t(c(f,{name:"ph:plus"},null,r,o)),t(" افزودن نقش ")}),_:1},s)):o("\x3c!----\x3e"),o("</div>"),o(c(p(g),{columns:w.value,data:C.value,loading:D.value,bordered:!1,class:"rounded-2xl ring-1 ring-slate-200 overflow-hidden"},null,s)),o("</section>")}}}),C=b.setup;b.setup=(e,t)=>{const r=u();return(r.modules||(r.modules=new Set)).add("pages/admin/roles/index.vue"),C?C(e,t):void 0};export{b as default};
//# sourceMappingURL=index-vTB_Bv2C.mjs.map
