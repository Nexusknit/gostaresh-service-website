import{A as e,U as t,av as r}from"./server.mjs";function resolveToken(){let e;try{const r=t();e=r?.token?.value??null}catch{e=null}if(!e)try{e=r("auth_token",{sameSite:"lax",path:"/"}).value}catch{e=null}return(n=e)&&String(n).replace(/^Bearer\s+/i,"").replace(/^"|"$/g,"").trim()||null;var n}function withAuth(e){const t=resolveToken();if(!t)return e?{...e}:{};const r=function(e){const t={};if(!e)return t;if(Array.isArray(e))for(const[r,n]of e)null!=n&&(t[r]=String(n));else if("undefined"!=typeof Headers&&e instanceof Headers)e.forEach((e,r)=>{t[r]=e});else if("object"==typeof e)for(const[r,n]of Object.entries(e))null!=n&&(t[r]=String(n));return t}(e?.headers);return Object.keys(r).some(e=>"authorization"===e.toLowerCase())||(r.Authorization=`Bearer ${t}`),{...e??{},headers:r}}function request(t,r){const{$apiFetch:n}=e(),o="string"==typeof t?function(e){return/^https?:\/\//i.test(e)||e.startsWith("//")?e:e.replace(/^\/+/,"")}(t):t;return n(o,withAuth(r))}function useApiFetch(){return(e,t)=>request(e,t)}function apiGet(e,t){return request(e,{...t??{},method:"GET"})}function apiPost(e,t,r){return request(e,{method:"POST",body:t})}function apiPut(e,t,r){return request(e,{method:"PUT",body:t})}function apiPatch(e,t,r){return request(e,{method:"PATCH",body:t})}function apiDelete(e,t){return request(e,{method:"DELETE"})}export{apiPut as a,apiDelete as b,apiGet as c,apiPost as d,apiPatch as e,useApiFetch as u};
//# sourceMappingURL=api-qvnChiK5.mjs.map
