import{_ as e}from"./nuxt-link-DlD_4d-2.mjs";import{defineComponent as a,ref as l,computed as t,mergeProps as u,withCtx as i,createTextVNode as n,unref as o,createVNode as r,useSSRContext as v}from"vue";import{ssrRenderAttrs as d,ssrRenderComponent as p}from"vue/server-renderer";import{useRoute as s}from"vue-router";import{A as m}from"./AdminImageUploader-_F4OgyLb.mjs";import{a as f,b as c}from"./api-qvnChiK5.mjs";import{N as b,C as U,F as g}from"./server.mjs";import{u as h}from"./use-message-DH0YWJK4.mjs";import{N as _,a as y}from"./FormItem-Ds_MAETL.mjs";import{N as k}from"./Input-DBNoyZOz.mjs";import{N as D}from"./Select-C0U9uRTf.mjs";import{N as I}from"./Switch-DTUH-ntq.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:path";import"pinia";import"@iconify/vue";import"@css-render/vue3-ssr";import"seemly";import"@css-render/plugin-bem";import"css-render";import"lodash-es";import"evtd";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"async-validator";import"date-fns/locale";import"treemate";import"./Tag-BJGgCXYj.mjs";import"@juggle/resize-observer";const w=a({__name:"[id]",__ssrInlineRender:!0,setup(a){const v=s(),w=String(v.params.id),x=h(),j=l(null),A=l({name:"",title:"",description:"",image:"",attribute:"",href:"",kindID:"",isActive:!0}),V=l(!1),C=l(!1),S=l([]),N=t(()=>S.value.map(e=>({label:e.name||e.id,value:e.id}))),q={name:{required:!0,message:"نام الزامی است",trigger:"blur"},kindID:{required:!0,message:"نوع الزامی است",trigger:"blur"}};async function onSubmit(){try{await(j.value?.validate())}catch{return}V.value=!0;try{await f(`/website-settings/${w}`,{name:A.value.name,title:A.value.title||void 0,description:A.value.description||void 0,image:A.value.image||void 0,attribute:A.value.attribute||void 0,href:A.value.href||void 0,kindID:A.value.kindID,isActive:A.value.isActive}),x.success("ذخیره شد")}catch(e){x.error(e?.data?.message||"خطا در ذخیره")}finally{V.value=!1}}async function onDelete(){if(confirm("حذف تنظیم؟")){C.value=!0;try{await c(`/website-settings/${w}`),x.success("حذف شد"),g("/admin/website-settings")}catch(e){x.error(e?.data?.message||"خطا در حذف")}finally{C.value=!1}}}return(a,l,t,v)=>{const s=e;l(`<section${d(u({class:"container mx-auto px-4 py-8",dir:"rtl"},v))}><div class="mb-5 flex items-center justify-between gap-3"><h1 class="text-xl font-bold">ویرایش تنظیم سایت</h1>`),l(p(s,{to:"/admin/website-settings",class:"text-sky-600 hover:underline text-sm"},{default:i((e,a,l,t)=>{if(!a)return[n("بازگشت")];a("بازگشت")}),_:1},t)),l("</div>"),l(p(o(b),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm",bordered:!1},{default:i((e,a,l,t)=>{if(!a)return[r(o(_),{model:A.value,rules:q,ref_key:"formRef",ref:j,"label-placement":"left","label-width":"140"},{default:i(()=>[r(o(y),{label:"نام",path:"name"},{default:i(()=>[r(o(k),{value:A.value.name,"onUpdate:value":e=>A.value.name=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"عنوان",path:"title"},{default:i(()=>[r(o(k),{value:A.value.title,"onUpdate:value":e=>A.value.title=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"توضیحات",path:"description"},{default:i(()=>[r(o(k),{value:A.value.description,"onUpdate:value":e=>A.value.description=e,type:"textarea"},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"تصویر",path:"image"},{default:i(()=>[r(m,{modelValue:A.value.image,"onUpdate:modelValue":e=>A.value.image=e,scope:"website-settings"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(o(y),{label:"attribute",path:"attribute"},{default:i(()=>[r(o(k),{value:A.value.attribute,"onUpdate:value":e=>A.value.attribute=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"لینک",path:"href"},{default:i(()=>[r(o(k),{value:A.value.href,"onUpdate:value":e=>A.value.href=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"نوع",path:"kindID"},{default:i(()=>[r(o(D),{value:A.value.kindID,"onUpdate:value":e=>A.value.kindID=e,options:N.value,filterable:""},null,8,["value","onUpdate:value","options"])]),_:1}),r(o(y),{label:"فعال"},{default:i(()=>[r(o(I),{value:A.value.isActive,"onUpdate:value":e=>A.value.isActive=e},null,8,["value","onUpdate:value"])]),_:1}),r("div",{class:"pt-2 flex items-center gap-2"},[r(o(U),{type:"primary",loading:V.value,onClick:onSubmit},{default:i(()=>[n("ذخیره")]),_:1},8,["loading"]),r(o(U),{type:"error",secondary:"",loading:C.value,onClick:onDelete},{default:i(()=>[n("حذف")]),_:1},8,["loading"])])]),_:1},8,["model"])];a(p(o(_),{model:A.value,rules:q,ref_key:"formRef",ref:j,"label-placement":"left","label-width":"140"},{default:i((e,a,l,t)=>{if(!a)return[r(o(y),{label:"نام",path:"name"},{default:i(()=>[r(o(k),{value:A.value.name,"onUpdate:value":e=>A.value.name=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"عنوان",path:"title"},{default:i(()=>[r(o(k),{value:A.value.title,"onUpdate:value":e=>A.value.title=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"توضیحات",path:"description"},{default:i(()=>[r(o(k),{value:A.value.description,"onUpdate:value":e=>A.value.description=e,type:"textarea"},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"تصویر",path:"image"},{default:i(()=>[r(m,{modelValue:A.value.image,"onUpdate:modelValue":e=>A.value.image=e,scope:"website-settings"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(o(y),{label:"attribute",path:"attribute"},{default:i(()=>[r(o(k),{value:A.value.attribute,"onUpdate:value":e=>A.value.attribute=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"لینک",path:"href"},{default:i(()=>[r(o(k),{value:A.value.href,"onUpdate:value":e=>A.value.href=e},null,8,["value","onUpdate:value"])]),_:1}),r(o(y),{label:"نوع",path:"kindID"},{default:i(()=>[r(o(D),{value:A.value.kindID,"onUpdate:value":e=>A.value.kindID=e,options:N.value,filterable:""},null,8,["value","onUpdate:value","options"])]),_:1}),r(o(y),{label:"فعال"},{default:i(()=>[r(o(I),{value:A.value.isActive,"onUpdate:value":e=>A.value.isActive=e},null,8,["value","onUpdate:value"])]),_:1}),r("div",{class:"pt-2 flex items-center gap-2"},[r(o(U),{type:"primary",loading:V.value,onClick:onSubmit},{default:i(()=>[n("ذخیره")]),_:1},8,["loading"]),r(o(U),{type:"error",secondary:"",loading:C.value,onClick:onDelete},{default:i(()=>[n("حذف")]),_:1},8,["loading"])])];a(p(o(y),{label:"نام",path:"name"},{default:i((e,a,l,t)=>{if(!a)return[r(o(k),{value:A.value.name,"onUpdate:value":e=>A.value.name=e},null,8,["value","onUpdate:value"])];a(p(o(k),{value:A.value.name,"onUpdate:value":e=>A.value.name=e},null,l,t))}),_:1},l,t)),a(p(o(y),{label:"عنوان",path:"title"},{default:i((e,a,l,t)=>{if(!a)return[r(o(k),{value:A.value.title,"onUpdate:value":e=>A.value.title=e},null,8,["value","onUpdate:value"])];a(p(o(k),{value:A.value.title,"onUpdate:value":e=>A.value.title=e},null,l,t))}),_:1},l,t)),a(p(o(y),{label:"توضیحات",path:"description"},{default:i((e,a,l,t)=>{if(!a)return[r(o(k),{value:A.value.description,"onUpdate:value":e=>A.value.description=e,type:"textarea"},null,8,["value","onUpdate:value"])];a(p(o(k),{value:A.value.description,"onUpdate:value":e=>A.value.description=e,type:"textarea"},null,l,t))}),_:1},l,t)),a(p(o(y),{label:"تصویر",path:"image"},{default:i((e,a,l,t)=>{if(!a)return[r(m,{modelValue:A.value.image,"onUpdate:modelValue":e=>A.value.image=e,scope:"website-settings"},null,8,["modelValue","onUpdate:modelValue"])];a(p(m,{modelValue:A.value.image,"onUpdate:modelValue":e=>A.value.image=e,scope:"website-settings"},null,l,t))}),_:1},l,t)),a(p(o(y),{label:"attribute",path:"attribute"},{default:i((e,a,l,t)=>{if(!a)return[r(o(k),{value:A.value.attribute,"onUpdate:value":e=>A.value.attribute=e},null,8,["value","onUpdate:value"])];a(p(o(k),{value:A.value.attribute,"onUpdate:value":e=>A.value.attribute=e},null,l,t))}),_:1},l,t)),a(p(o(y),{label:"لینک",path:"href"},{default:i((e,a,l,t)=>{if(!a)return[r(o(k),{value:A.value.href,"onUpdate:value":e=>A.value.href=e},null,8,["value","onUpdate:value"])];a(p(o(k),{value:A.value.href,"onUpdate:value":e=>A.value.href=e},null,l,t))}),_:1},l,t)),a(p(o(y),{label:"نوع",path:"kindID"},{default:i((e,a,l,t)=>{if(!a)return[r(o(D),{value:A.value.kindID,"onUpdate:value":e=>A.value.kindID=e,options:N.value,filterable:""},null,8,["value","onUpdate:value","options"])];a(p(o(D),{value:A.value.kindID,"onUpdate:value":e=>A.value.kindID=e,options:N.value,filterable:""},null,l,t))}),_:1},l,t)),a(p(o(y),{label:"فعال"},{default:i((e,a,l,t)=>{if(!a)return[r(o(I),{value:A.value.isActive,"onUpdate:value":e=>A.value.isActive=e},null,8,["value","onUpdate:value"])];a(p(o(I),{value:A.value.isActive,"onUpdate:value":e=>A.value.isActive=e},null,l,t))}),_:1},l,t)),a(`<div class="pt-2 flex items-center gap-2"${t}>`),a(p(o(U),{type:"primary",loading:V.value,onClick:onSubmit},{default:i((e,a,l,t)=>{if(!a)return[n("ذخیره")];a("ذخیره")}),_:1},l,t)),a(p(o(U),{type:"error",secondary:"",loading:C.value,onClick:onDelete},{default:i((e,a,l,t)=>{if(!a)return[n("حذف")];a("حذف")}),_:1},l,t)),a("</div>")}),_:1},l,t))}),_:1},t)),l("</section>")}}}),x=w.setup;w.setup=(e,a)=>{const l=v();return(l.modules||(l.modules=new Set)).add("pages/admin/website-settings/[id].vue"),x?x(e,a):void 0};export{w as default};
//# sourceMappingURL=_id_-tSHYTu7q.mjs.map
