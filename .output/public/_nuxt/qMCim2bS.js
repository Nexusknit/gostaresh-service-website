import b from"./QLnPFQ3u.js";import{_ as C}from"./Bno8S_cx.js";import{a as N,c as B}from"./DWH2qXdP.js";import{u as w}from"./wRpwCGT5.js";import{b as D,j as d,g as a,G as V,k as E,l as p,y as f,q as T,C as j,s as z,B as G,h as i,W as _,o as x,D as L,as as M}from"./vp8MPyNN.js";import{N as $}from"./BdE0Vslz.js";import{u as q}from"./ybW-YjLz.js";import"./mYRyJGGe.js";import"./Bw_fySTz.js";import"./DTlRyxep.js";import"./mfReoYN0.js";import"./uD4T5QrJ.js";import"./CXuCsgek.js";import"./Bk_rJcZu.js";const A={class:"container mx-auto px-4 py-8",dir:"rtl"},I={class:"mb-5 flex items-center justify-between gap-3"},te=D({__name:"index",setup(P){const{hasPerm:o}=w(),c=q(),u=d([]),n=d(!1),v=a(()=>o("role.create")),r=a(()=>o("role.update")),l=a(()=>o("role.delete"));async function m(){n.value=!0;try{u.value=await N("/roles")}finally{n.value=!1}}V(m);function y(t){r.value&&M(`/admin/roles/${t.id}`)}async function g(t){if(l.value&&confirm("حذف نقش؟"))try{await B(`/roles/${t.id}`),c.success("حذف شد"),m()}catch(e){c.error(e?.data?.message||"حذف انجام نشد")}}const h=a(()=>{const t=[{title:"نام",key:"name"},{title:"شناسه",key:"id"}];return(r.value||l.value)&&t.push({title:"اقدامات",key:"actions",render(e){const s=[];return r.value&&s.push(i(_,{size:"small",onClick:()=>y(e)},{default:()=>"ویرایش"})),l.value&&s.push(i(_,{size:"small",type:"error",secondary:!0,onClick:()=>g(e)},{default:()=>"حذف"})),s.length?i("div",{class:"flex items-center gap-2"},s):null}}),t});return(t,e)=>{const s=b,k=C;return x(),E("section",A,[p("div",I,[e[1]||(e[1]=p("h1",{class:"text-xl font-bold"},"نقش‌ها",-1)),v.value?(x(),T(k,{key:0,to:"/admin/roles/create",class:"inline-flex items-center gap-2 rounded-xl bg-sky-600 text-white px-3 py-2 text-sm"},{default:z(()=>[f(s,{name:"ph:plus"}),e[0]||(e[0]=L(" افزودن نقش ",-1))]),_:1})):j("",!0)]),f(G($),{columns:h.value,data:u.value,loading:n.value,bordered:!1,class:"rounded-2xl ring-1 ring-slate-200 overflow-hidden"},null,8,["columns","data","loading"])])}}});export{te as default};
