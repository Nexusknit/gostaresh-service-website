import{_ as V}from"./Bno8S_cx.js";import{b as h,S as B,j as r,G as C,g as S,k as j,l as f,y as a,s,B as l,o as R,D as g,W as y,N as $,as as q}from"./vp8MPyNN.js";import{A as F}from"./DKL51_I7.js";import{a as w,b as G,c as M}from"./DWH2qXdP.js";import{u as O}from"./ybW-YjLz.js";import{N as P,a as u}from"./DToeYN_d.js";import{N as d}from"./Bw_fySTz.js";import{N as T}from"./uD4T5QrJ.js";import{N as E}from"./r23Yv2v_.js";import"./CXuCsgek.js";const K={class:"container mx-auto px-4 py-8",dir:"rtl"},L={class:"mb-5 flex items-center justify-between gap-3"},W={class:"pt-2 flex items-center gap-2"},ie=h({__name:"[id]",setup(z){const k=B(),v=String(k.params.id),o=O(),b=r(null),e=r({name:"",title:"",description:"",image:"",attribute:"",href:"",kindID:"",isActive:!0}),m=r(!1),p=r(!1),c=r([]);C(async()=>{await Promise.all([x(),N()])});async function x(){try{Object.assign(e.value,await w(`/website-settings/${v}`)||{})}catch{o.error("خواندن ناموفق بود")}}async function N(){try{c.value=await w("/website-setting-kinds")}catch{}}const _=S(()=>c.value.map(n=>({label:n.name||n.id,value:n.id}))),D={name:{required:!0,message:"نام الزامی است",trigger:"blur"},kindID:{required:!0,message:"نوع الزامی است",trigger:"blur"}};async function I(){try{await b.value?.validate()}catch{return}m.value=!0;try{await G(`/website-settings/${v}`,{name:e.value.name,title:e.value.title||void 0,description:e.value.description||void 0,image:e.value.image||void 0,attribute:e.value.attribute||void 0,href:e.value.href||void 0,kindID:e.value.kindID,isActive:e.value.isActive}),o.success("ذخیره شد")}catch(n){o.error(n?.data?.message||"خطا در ذخیره")}finally{m.value=!1}}async function U(){if(confirm("حذف تنظیم؟")){p.value=!0;try{await M(`/website-settings/${v}`),o.success("حذف شد"),q("/admin/website-settings")}catch(n){o.error(n?.data?.message||"خطا در حذف")}finally{p.value=!1}}}return(n,t)=>{const A=V;return R(),j("section",K,[f("div",L,[t[9]||(t[9]=f("h1",{class:"text-xl font-bold"},"ویرایش تنظیم سایت",-1)),a(A,{to:"/admin/website-settings",class:"text-sky-600 hover:underline text-sm"},{default:s(()=>[...t[8]||(t[8]=[g("بازگشت",-1)])]),_:1})]),a(l($),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm",bordered:!1},{default:s(()=>[a(l(P),{model:e.value,rules:D,ref_key:"formRef",ref:b,"label-placement":"left","label-width":"140"},{default:s(()=>[a(l(u),{label:"نام",path:"name"},{default:s(()=>[a(l(d),{value:e.value.name,"onUpdate:value":t[0]||(t[0]=i=>e.value.name=i)},null,8,["value"])]),_:1}),a(l(u),{label:"عنوان",path:"title"},{default:s(()=>[a(l(d),{value:e.value.title,"onUpdate:value":t[1]||(t[1]=i=>e.value.title=i)},null,8,["value"])]),_:1}),a(l(u),{label:"توضیحات",path:"description"},{default:s(()=>[a(l(d),{value:e.value.description,"onUpdate:value":t[2]||(t[2]=i=>e.value.description=i),type:"textarea"},null,8,["value"])]),_:1}),a(l(u),{label:"تصویر",path:"image"},{default:s(()=>[a(F,{modelValue:e.value.image,"onUpdate:modelValue":t[3]||(t[3]=i=>e.value.image=i),scope:"website-settings"},null,8,["modelValue"])]),_:1}),a(l(u),{label:"attribute",path:"attribute"},{default:s(()=>[a(l(d),{value:e.value.attribute,"onUpdate:value":t[4]||(t[4]=i=>e.value.attribute=i)},null,8,["value"])]),_:1}),a(l(u),{label:"لینک",path:"href"},{default:s(()=>[a(l(d),{value:e.value.href,"onUpdate:value":t[5]||(t[5]=i=>e.value.href=i)},null,8,["value"])]),_:1}),a(l(u),{label:"نوع",path:"kindID"},{default:s(()=>[a(l(T),{value:e.value.kindID,"onUpdate:value":t[6]||(t[6]=i=>e.value.kindID=i),options:_.value,filterable:""},null,8,["value","options"])]),_:1}),a(l(u),{label:"فعال"},{default:s(()=>[a(l(E),{value:e.value.isActive,"onUpdate:value":t[7]||(t[7]=i=>e.value.isActive=i)},null,8,["value"])]),_:1}),f("div",W,[a(l(y),{type:"primary",loading:m.value,onClick:I},{default:s(()=>[...t[10]||(t[10]=[g("ذخیره",-1)])]),_:1},8,["loading"]),a(l(y),{type:"error",secondary:"",loading:p.value,onClick:U},{default:s(()=>[...t[11]||(t[11]=[g("حذف",-1)])]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})])}}});export{ie as default};
