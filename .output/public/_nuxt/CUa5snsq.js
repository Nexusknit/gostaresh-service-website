import{_ as j}from"./Bno8S_cx.js";import S from"./QLnPFQ3u.js";import{a as w,c as U}from"./DWH2qXdP.js";import{b as V,j as l,g as h,H as q,k as E,l as n,y as a,s as i,B as o,A as L,h as _,W as f,o as $,D as u,N as G,as as H}from"./vp8MPyNN.js";import{N as M}from"./Bw_fySTz.js";import{N as O}from"./uD4T5QrJ.js";import{N as W}from"./r23Yv2v_.js";import{N as F}from"./BdE0Vslz.js";import"./CXuCsgek.js";import"./DTlRyxep.js";import"./mfReoYN0.js";import"./Bk_rJcZu.js";const J={class:"container mx-auto px-4 py-8",dir:"rtl"},K={class:"mb-5 flex items-center justify-between gap-3"},P={class:"flex items-center gap-2"},Q={class:"flex flex-wrap items-center gap-3"},R={class:"mt-4 flex items-center justify-between"},X={class:"text-sm text-slate-600"},Y={class:"flex items-center gap-2"},me=V({__name:"index",setup(Z){const c=l(""),m=l(null),p=l(!1),r=l(10),s=l(0),y=l([]),v=l(0),x=l(!1),g=l([]);async function b(){x.value=!0;try{const t=await w("/articles",{params:{q:c.value||void 0,articleTypeID:m.value||void 0,isActive:p.value?!0:void 0,limit:r.value,offset:s.value}});y.value=Array.isArray(t?.items)?t.items:[],v.value=typeof t?.total=="number"?t.total:y.value.length}finally{x.value=!1}}async function D(){try{g.value=await w("/articles/types")}catch{g.value=[]}}const A=h(()=>g.value.map(t=>({label:t.name||t.id,value:t.id})));function C(){s.value=Math.max(0,s.value-r.value)}function T(){s.value+r.value<v.value&&(s.value+=r.value)}q([c,m,p,r,s],b,{immediate:!0}),D();function z(t){H(`/admin/articles/${t.id}`)}async function B(t){confirm("حذف مقاله؟")&&(await U(`/articles/${t.id}`),b())}const I=h(()=>[{title:"عنوان",key:"title"},{title:"اسلاگ",key:"slug"},{title:"نوع",key:"articleTypeID"},{title:"فعال",key:"isActive",render:t=>t.isActive?"بله":"خیر"},{title:"عملیات",key:"actions",render(t){return _("div",{class:"flex items-center gap-2"},[_(f,{size:"small",onClick:()=>z(t)},{default:()=>"ویرایش"}),_(f,{size:"small",type:"error",secondary:!0,onClick:()=>B(t)},{default:()=>"حذف"})])}}]);return(t,e)=>{const k=j,N=S;return $(),E("section",J,[n("div",K,[e[5]||(e[5]=n("h1",{class:"text-xl font-bold"},"مقالات",-1)),n("div",P,[a(k,{to:"/admin/articles/types",class:"text-sky-600 hover:underline text-sm"},{default:i(()=>[...e[3]||(e[3]=[u("مدیریت نوع مقالات",-1)])]),_:1}),a(k,{to:"/admin/articles/create",class:"inline-flex items-center gap-2 rounded-xl bg-sky-600 text-white px-3 py-2 text-sm"},{default:i(()=>[a(N,{name:"ph:plus"}),e[4]||(e[4]=u(" افزودن مقاله ",-1))]),_:1})])]),a(o(G),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm mb-4",bordered:!1},{default:i(()=>[n("div",Q,[a(o(M),{value:c.value,"onUpdate:value":e[0]||(e[0]=d=>c.value=d),placeholder:"جستجو...",class:"w-64",clearable:"",size:"large"},{prefix:i(()=>[a(N,{name:"ph:magnifying-glass-duotone"})]),_:1},8,["value"]),a(o(O),{value:m.value,"onUpdate:value":e[1]||(e[1]=d=>m.value=d),options:A.value,placeholder:"نوع",class:"w-52",clearable:""},null,8,["value","options"]),a(o(W),{value:p.value,"onUpdate:value":e[2]||(e[2]=d=>p.value=d)},{checked:i(()=>[...e[6]||(e[6]=[u("فقط فعال",-1)])]),unchecked:i(()=>[...e[7]||(e[7]=[u("همه",-1)])]),_:1},8,["value"])])]),_:1}),a(o(F),{columns:I.value,data:y.value,loading:x.value,bordered:!1,class:"rounded-2xl ring-1 ring-slate-200 overflow-hidden"},null,8,["columns","data","loading"]),n("div",R,[n("div",X,"مجموع: "+L(v.value),1),n("div",Y,[a(o(f),{size:"small",disabled:s.value===0,onClick:C},{default:i(()=>[...e[8]||(e[8]=[u("قبلی",-1)])]),_:1},8,["disabled"]),a(o(f),{size:"small",disabled:s.value+r.value>=v.value,onClick:T},{default:i(()=>[...e[9]||(e[9]=[u("بعدی",-1)])]),_:1},8,["disabled"])])])])}}});export{me as default};
