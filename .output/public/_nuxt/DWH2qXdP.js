import{aj as s,aV as u,aW as i}from"./vp8MPyNN.js";function c(e){return/^https?:\/\//i.test(e)||e.startsWith("//")?e:e.replace(/^\/+/,"")}function f(e){return e&&String(e).replace(/^Bearer\s+/i,"").replace(/^"|"$/g,"").trim()||null}function l(){let e;try{e=u()?.token?.value??null}catch{e=null}if(!e)try{e=i("auth_token",{sameSite:"lax",path:"/"}).value}catch{e=null}if(!e)try{e=localStorage.getItem("auth_token")}catch{e=null}return f(e)}function h(e){const t={};if(!e)return t;if(Array.isArray(e))for(const[n,r]of e)r!=null&&(t[n]=String(r));else if(typeof Headers<"u"&&e instanceof Headers)e.forEach((n,r)=>{t[r]=n});else if(typeof e=="object")for(const[n,r]of Object.entries(e))r!=null&&(t[n]=String(r));return t}function p(e){const t=l();if(!t)return e?{...e}:{};const n=h(e?.headers);return Object.keys(n).some(a=>a.toLowerCase()==="authorization")||(n.Authorization=`Bearer ${t}`),{...e??{},headers:n}}function o(e,t){const{$apiFetch:n}=s(),r=typeof e=="string"?c(e):e;return n(r,p(t))}function m(){return(e,t)=>o(e,t)}function k(e,t){return o(e,{...t??{},method:"GET"})}function y(e,t,n){return o(e,{method:"POST",body:t})}function A(e,t,n){return o(e,{method:"PUT",body:t})}function g(e,t,n){return o(e,{method:"PATCH",body:t})}function v(e,t){return o(e,{method:"DELETE"})}export{k as a,A as b,v as c,y as d,g as e,m as u};
