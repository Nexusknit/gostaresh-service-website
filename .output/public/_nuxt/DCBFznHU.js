import{_ as w}from"./Bno8S_cx.js";import{b as B,S as C,j as l,G as S,k as h,l as d,y as a,s,B as n,o as j,D as f,W as y,N as D,as as g}from"./vp8MPyNN.js";import{a as R,b as V,c as A}from"./DWH2qXdP.js";import{u as F}from"./ybW-YjLz.js";import{N as G,a as I}from"./DToeYN_d.js";import{N as M}from"./Bw_fySTz.js";const T={class:"container mx-auto px-4 py-8",dir:"rtl"},$={class:"mb-5 flex items-center justify-between gap-3"},q={class:"pt-2 flex items-center gap-2"},H=B({__name:"[id]",setup(E){const v=C(),i=String(v.params.id),o=F(),p=l(null),r=l({name:""}),_={name:{required:!0,message:"نام الزامی است",trigger:"blur"}},u=l(!1),m=l(!1);S(x);async function x(){try{const t=await R("/articles/types"),e=(Array.isArray(t)?t:[]).find(c=>String(c.id)===String(i));e&&Object.assign(r.value,e)}catch{}}async function b(){try{await p.value?.validate()}catch{return}u.value=!0;try{await V(`/articles/types/${i}`,{name:r.value.name}),o.success("ذخیره شد"),g("/admin/articles/types")}catch(t){o.error(t?.data?.message||"خطا در ذخیره")}finally{u.value=!1}}async function N(){if(confirm("حذف نوع؟")){m.value=!0;try{await A(`/articles/types/${i}`),o.success("حذف شد"),g("/admin/articles/types")}catch(t){o.error(t?.data?.message||"خطا در حذف")}finally{m.value=!1}}}return(t,e)=>{const c=w;return j(),h("section",T,[d("div",$,[e[2]||(e[2]=d("h1",{class:"text-xl font-bold"},"ویرایش نوع مقاله",-1)),a(c,{to:"/admin/articles/types",class:"text-sky-600 hover:underline text-sm"},{default:s(()=>[...e[1]||(e[1]=[f("بازگشت",-1)])]),_:1})]),a(n(D),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm",bordered:!1},{default:s(()=>[a(n(G),{model:r.value,rules:_,ref_key:"formRef",ref:p,"label-placement":"left","label-width":"140"},{default:s(()=>[a(n(I),{label:"نام",path:"name"},{default:s(()=>[a(n(M),{value:r.value.name,"onUpdate:value":e[0]||(e[0]=k=>r.value.name=k)},null,8,["value"])]),_:1}),d("div",q,[a(n(y),{type:"primary",loading:u.value,onClick:b},{default:s(()=>[...e[3]||(e[3]=[f("ذخیره",-1)])]),_:1},8,["loading"]),a(n(y),{type:"error",secondary:"",loading:m.value,onClick:N},{default:s(()=>[...e[4]||(e[4]=[f("حذف",-1)])]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})])}}});export{H as default};
