import{_ as y}from"./Bno8S_cx.js";import{A as _}from"./DKL51_I7.js";import{u as N,d as w}from"./DWH2qXdP.js";import{b as A,j as i,k,l as d,y as t,s as u,B as l,o as B,D as f,W as U,N as V,as as C}from"./vp8MPyNN.js";import{u as S}from"./ybW-YjLz.js";import{N as h,a as n}from"./DToeYN_d.js";import{N as m}from"./Bw_fySTz.js";import{N as F}from"./r23Yv2v_.js";const I={class:"container mx-auto px-4 py-8",dir:"rtl"},T={class:"mb-5 flex items-center justify-between gap-3"},j={class:"pt-2"},z=A({__name:"create",setup(P){const v=S(),p=i(null),e=i({name:"",slug:"",description:"",image:"",isActive:!0}),r=i(!1),g={name:{required:!0,message:"نام الزامی است",trigger:"blur"}};async function c(){if(!(!e.value.name||e.value.slug))try{const{slug:o}=await N()("utils/slug/preview",{method:"POST",body:{model:"brand",source:e.value.name}});o&&(e.value.slug=o)}catch{}}async function b(){try{await p.value?.validate()}catch{return}r.value=!0;try{await w("/brands",{name:e.value.name,description:e.value.description||void 0,image:e.value.image||void 0,slug:e.value.slug||void 0,isActive:e.value.isActive}),v.success("برند افزوده شد"),C("/admin/brands")}catch(o){v.error(o?.data?.message||"خطا در ثبت")}finally{r.value=!1}}return(o,a)=>{const x=y;return B(),k("section",I,[d("div",T,[a[6]||(a[6]=d("h1",{class:"text-xl font-bold"},"افزودن برند",-1)),t(x,{to:"/admin/brands",class:"text-sky-600 hover:underline text-sm"},{default:u(()=>[...a[5]||(a[5]=[f("بازگشت",-1)])]),_:1})]),t(l(V),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm",bordered:!1},{default:u(()=>[t(l(h),{model:e.value,rules:g,ref_key:"formRef",ref:p,"label-placement":"left","label-width":"120"},{default:u(()=>[t(l(n),{label:"نام",path:"name"},{default:u(()=>[t(l(m),{value:e.value.name,"onUpdate:value":a[0]||(a[0]=s=>e.value.name=s),onBlur:c},null,8,["value"])]),_:1}),t(l(n),{label:"اسلاگ",path:"slug"},{default:u(()=>[t(l(m),{value:e.value.slug,"onUpdate:value":a[1]||(a[1]=s=>e.value.slug=s)},null,8,["value"])]),_:1}),t(l(n),{label:"توضیحات",path:"description"},{default:u(()=>[t(l(m),{value:e.value.description,"onUpdate:value":a[2]||(a[2]=s=>e.value.description=s),type:"textarea"},null,8,["value"])]),_:1}),t(l(n),{label:"تصویر",path:"image"},{default:u(()=>[t(_,{modelValue:e.value.image,"onUpdate:modelValue":a[3]||(a[3]=s=>e.value.image=s),scope:"brands"},null,8,["modelValue"])]),_:1}),t(l(n),{label:"فعال"},{default:u(()=>[t(l(F),{value:e.value.isActive,"onUpdate:value":a[4]||(a[4]=s=>e.value.isActive=s)},null,8,["value"])]),_:1}),d("div",j,[t(l(U),{type:"primary",loading:r.value,onClick:b},{default:u(()=>[...a[7]||(a[7]=[f("ثبت",-1)])]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})])}}});export{z as default};
