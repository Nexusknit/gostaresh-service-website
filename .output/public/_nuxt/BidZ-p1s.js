import S from"./QLnPFQ3u.js";import{_ as T}from"./Bno8S_cx.js";import{a as w,c as U}from"./DWH2qXdP.js";import{b as V,j as s,g as N,H as q,k as E,l as u,y as a,s as i,B as n,A as L,h as b,W as p,o as $,D as d,N as G,as as H}from"./vp8MPyNN.js";import{N as K}from"./Bw_fySTz.js";import{N as M}from"./uD4T5QrJ.js";import{N as O}from"./r23Yv2v_.js";import{N as W}from"./BdE0Vslz.js";import"./CXuCsgek.js";import"./DTlRyxep.js";import"./mfReoYN0.js";import"./Bk_rJcZu.js";const F={class:"container mx-auto px-4 py-8",dir:"rtl"},J={class:"mb-5 flex items-center justify-between gap-3"},P={class:"flex flex-wrap items-center gap-3"},Q={class:"mt-4 flex items-center justify-between"},R={class:"text-sm text-slate-600"},X={class:"flex items-center gap-2"},me=V({__name:"index",setup(Y){const m=s(""),c=s(null),v=s(!1),o=s(10),l=s(0),x=s([]),f=s(0),g=s(!1),y=s([]);async function k(){g.value=!0;try{const e=await w("/website-settings",{params:{q:m.value||void 0,kindID:c.value||void 0,isActive:v.value?!0:void 0,limit:o.value,offset:l.value}});x.value=Array.isArray(e?.items)?e.items:[],f.value=typeof e?.total=="number"?e.total:x.value.length}finally{g.value=!1}}async function h(){try{y.value=await w("/website-setting-kinds")}catch{y.value=[]}}const D=N(()=>y.value.map(e=>({label:e.name||e.id,value:e.id})));function A(){l.value=Math.max(0,l.value-o.value)}function C(){l.value+o.value<f.value&&(l.value+=o.value)}q([m,c,v,o,l],k,{immediate:!0}),h();function z(e){H(`/admin/website-settings/${e.id}`)}async function B(e){confirm("حذف تنظیم؟")&&(await U(`/website-settings/${e.id}`),k())}const I=N(()=>[{title:"نام",key:"name"},{title:"عنوان",key:"title"},{title:"نوع",key:"kindID"},{title:"لینک",key:"href"},{title:"فعال",key:"isActive",render:e=>e.isActive?"بله":"خیر"},{title:"عملیات",key:"actions",render(e){return b("div",{class:"flex items-center gap-2"},[b(p,{size:"small",onClick:()=>z(e)},{default:()=>"ویرایش"}),b(p,{size:"small",type:"error",secondary:!0,onClick:()=>B(e)},{default:()=>"حذف"})])}}]);return(e,t)=>{const _=S,j=T;return $(),E("section",F,[u("div",J,[t[4]||(t[4]=u("h1",{class:"text-xl font-bold"},"تنظیمات سایت",-1)),a(j,{to:"/admin/website-settings/create",class:"inline-flex items-center gap-2 rounded-xl bg-sky-600 text-white px-3 py-2 text-sm"},{default:i(()=>[a(_,{name:"ph:plus"}),t[3]||(t[3]=d(" افزودن تنظیم ",-1))]),_:1})]),a(n(G),{class:"rounded-2xl ring-1 ring-slate-200/80 shadow-sm mb-4",bordered:!1},{default:i(()=>[u("div",P,[a(n(K),{value:m.value,"onUpdate:value":t[0]||(t[0]=r=>m.value=r),placeholder:"جستجو...",class:"w-64",clearable:"",size:"large"},{prefix:i(()=>[a(_,{name:"ph:magnifying-glass-duotone"})]),_:1},8,["value"]),a(n(M),{value:c.value,"onUpdate:value":t[1]||(t[1]=r=>c.value=r),options:D.value,placeholder:"نوع",class:"w-52",clearable:""},null,8,["value","options"]),a(n(O),{value:v.value,"onUpdate:value":t[2]||(t[2]=r=>v.value=r)},{checked:i(()=>[...t[5]||(t[5]=[d("فقط فعال",-1)])]),unchecked:i(()=>[...t[6]||(t[6]=[d("همه",-1)])]),_:1},8,["value"])])]),_:1}),a(n(W),{columns:I.value,data:x.value,loading:g.value,bordered:!1,class:"rounded-2xl ring-1 ring-slate-200 overflow-hidden"},null,8,["columns","data","loading"]),u("div",Q,[u("div",R,"مجموع: "+L(f.value),1),u("div",X,[a(n(p),{size:"small",disabled:l.value===0,onClick:A},{default:i(()=>[...t[7]||(t[7]=[d("قبلی",-1)])]),_:1},8,["disabled"]),a(n(p),{size:"small",disabled:l.value+o.value>=f.value,onClick:C},{default:i(()=>[...t[8]||(t[8]=[d("بعدی",-1)])]),_:1},8,["disabled"])])])])}}});export{me as default};
